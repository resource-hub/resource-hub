{% load i18n %}
{% load staticfiles %}

<nav class="navigation-bar">
    <div class="left">
        <!-- <a class="item">
            <img src="{% static 'logo.png' %}" width="25" height="25">
        </a> -->
        <a class="item" href="{% url 'core:index' %}">
            {% trans 'Home' %}
        </a>
        <div class="ui pointing dropdown item">
            {% get_current_language as LANGUAGE_CODE %}
            {% get_language_info for LANGUAGE_CODE as CURRENT_LANG %}
            <span class="text">{{ CURRENT_LANG.name_local }}</span>
            <i class="dropdown icon"></i>
            <div class="menu item">
                {% get_available_languages as LANGUAGES %}
                {% get_language_info_list for LANGUAGES as languages %}
                {% for language in languages %}
                <option value="{{ language.code }}"
                    class="lang item {% if language.code == LANGUAGE_CODE %}active selected{% endif %}">
                    <span class="text">{{ language.name_local }}</span>
                </option>
                {% endfor %}
            </div>
        </div>
    </div>
    </div>
    <div class="right">
        {% if user.is_authenticated %}
        <div>
            <img width="30" height="30" src="
                {% if user.info.thumbnail_small %}
                {{ user.info.thumbnail_small.url }}
                {% else %}
                {% static 'default.png' %}
                {% endif %}
                ">
        </div>
        <div class="ui pointing dropdown item" style="margin-top: 9px;">
            <span>
                {{ user.first_name }}
            </span>
            <i class="dropdown icon"></i>
            <div class="menu">
                <a class="item" href="{% url 'core:admin' %}"> <i class="sliders horizontal icon"></i> Admin</a>
                <a class="item" href="{% url 'core:admin' %}"><i class="address card outline icon"></i> Change role</a>
                <div class="divider"></div>
                <div class="item">
                    <a class="ui red button" href="{% url 'core:logout' %}">
                        {% trans 'Logout' %}
                    </a>
                </div>
            </div>
        </div>
        {% else %}
        <div class="item">
            <a class="small ui primary button" href="{% url 'core:register' %}">
                {% trans 'Register' %}
            </a>

            <a class="small ui positive button" href="{% url 'core:login' %}">
                {% trans 'Login' %}
            </a>
        </div>
        {% endif %}
    </div>
</nav>

<form id="language-form" action="{% url 'core:set_language' %}" method="post">
    <input name="next" type="hidden" value="{{ redirect_to }}">
    <input id="language" type="hidden" name="language">
    {% csrf_token %}
</form>