{% extends 'core/__base.html' %}
{% load i18n %}
{% load static %}

{% block extra_head %}
<link href="{% static 'fullcalendar/main.min.css' %}" rel="stylesheet">
<link href="{% static 'fullcalendar/daygrid/main.min.css' %}" rel="stylesheet">
<script src="{% static 'fullcalendar/main.min.js' %}"></script>
<script src="{% static 'fullcalendar/daygrid/main.min.js' %}"></script>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        var calendarEl = document.getElementById('calendar');

        var calendar = new FullCalendar.Calendar(calendarEl, {
            events: "{% url 'api:venues_event_feed' venue_id=venue.id %}",
            plugins: ['dayGrid']
        });

        calendar.render();
    });
</script>
{% endblock %}

{% block content %}
<div class="ui stackable two column grid">
    <div class="column">
        <h1>{{ venue.name }}</h1>
        <p>
            {{ venue.description |safe }}
        </p>
    </div>
    <div class="column">
        {% if venue.bookable %}
        <div id='calendar'></div>
        <div class="spacer">
            <a class="ui right labeled positive icon button"
                href="{% url 'venues:events_create' venue_slug=venue.slug location_slug=venue.location.slug %}">
                {% trans 'book' %}
                <i class="calendar alternate outline icon"></i>
            </a>
        </div>
        {% else %}
        <img class="ui fluid image" src="{{ venue.thumbnail_original.url }}">
        {% endif %}
    </div>
</div>
{% endblock %}

{% block scripts %}
{% endblock %}