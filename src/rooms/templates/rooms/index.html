{% extends 'core/__base.html' %}
{% load i18n %}
{% load sekizai_tags %}

{% block content %}
<div class="ui segment">
    <h5>Filters <i class="filter icon"></i></h5>
    <form class="ui form" id="filter-form">
        <div class="ui icon input">
            <input id="search-room" name="search_query" type="text" placeholder="{% trans 'Search...' %}">
            <i class="search icon"></i>
        </div>
        <button class="ui right floated positive right labeled icon button" type="submit">
            {% trans 'Filter' %}
            <i class="filter icon"></i>
        </button>
    </form>
</div>

{% include 'rooms/_room_feed.html' %}
{% addtoblock 'js' %}
<script>
    $(document).ready(function () {
        create_feed();

        // live search disabled
        // $('#search-room').on('input', function () {
        //     var val = $(this).val().trim();
        //     val = val.replace(/\s+/g, '');

        //     if (val.length % 3 == 0) { //for checking 3 characters
        //         create_feed(val);
        //     }
        // });

        $('#filter-form').on('submit', function (e) {
            e.preventDefault();
            var query = $(this).find("input[name='search_query']").val();
            create_feed(query);
        })

    });
</script>
{% endaddtoblock %}
{% endblock %}